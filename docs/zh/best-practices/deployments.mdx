---
title: "éƒ¨ç½² Stagehand"
description: "å°† AI ä»£ç†ä¸è‡ªåŠ¨åŒ–éƒ¨ç½²åˆ°äº‘ç«¯"
---

<Tip>
  **ğŸŒŸ é¢„è§ˆï¼šBrowser Functions** - ä½¿ç”¨ browser functions ç›´æ¥åœ¨ Browserbase ä¸Šéƒ¨ç½²ç½‘é¡µè‡ªåŠ¨åŒ–ä»£ç ã€‚æ— éœ€ä»»ä½•åŸºç¡€è®¾æ–½é…ç½®ï¼Œå³å¯åœ¨äº‘ç«¯æ¨ªå‘æ‰©å±•ä½ çš„ `act()` è‡ªåŠ¨åŒ–ã€‚è¯·è”ç³» hello@browserbase.com è·å–æµ‹è¯•èµ„æ ¼ã€‚
</Tip>

## éƒ¨ç½²åˆ° Vercel

åœ¨ Vercel Function ä¸­é€šè¿‡ Browserbase å®‰å…¨è¿è¡Œ Stagehandã€‚æœ¬æŒ‡å—æä¾›ä¸€ä¸ªæœ€å°ã€é€‚ç”¨äºç”Ÿäº§çš„ HTTP ç«¯ç‚¹ï¼Œä½ å¯ä»¥ç›´æ¥è°ƒç”¨æˆ–æŒ‰è®¡åˆ’è§¦å‘ã€‚

### 1. å®‰è£… Vercel CLI

è¦ä¸‹è½½å¹¶å®‰è£… Vercel CLIï¼Œè¿è¡Œä»¥ä¸‹ä»»ä¸€å‘½ä»¤ï¼š

<CodeGroup>
  ```bash pnpm
  pnpm i -g vercel
  ```

  ```bash yarn
  yarn global add vercel
  ```

  ```bash npm
  npm i -g vercel
  ```

  ```bash bun
  bun add -g vercel
  ```
</CodeGroup>

### 2. é¡¹ç›®ç»“æ„

```text
your-project/
  api/
    run.ts
  package.json
  tsconfig.json
  vercel.json
```

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºè¯¥ç»“æ„ï¼š

```bash
mkdir -p api
touch api/run.ts package.json vercel.json tsconfig.json
```

### 3. `api/run.ts`ï¼ˆNode.js è¿è¡Œæ—¶ï¼‰

```typescript
// api/run.ts
import type { VercelRequest, VercelResponse } from "@vercel/node";
import { Stagehand } from "@browserbasehq/stagehand";
import { z } from "zod";

export default async function handler(req: VercelRequest, res: VercelResponse): Promise<void> {
  try {
    const stagehand = new Stagehand({
      env: "BROWSERBASE",
      apiKey: process.env.BROWSERBASE_API_KEY!,
      projectId: process.env.BROWSERBASE_PROJECT_ID!,
      modelName: "google/gemini-2.5-flash",
      modelClientOptions: {
        apiKey: process.env.GOOGLE_API_KEY!,
      },
      // optional session params
      browserbaseSessionCreateParams: {
        projectId: process.env.BROWSERBASE_PROJECT_ID!,
        region: "us-west-2",
        browserSettings: {
          blockAds: true,
        },
      },
    });

    await stagehand.init();
    const page = stagehand.page;

    await page.goto("https://www.stagehand.dev/");
    await page.act("click the evals button");

    const { extraction } = await page.extract("extract the fastest model");
    const data = { model: extraction ?? "" };

    await stagehand.close();

    res.status(200).json({ ok: true, data: data.model });
  } catch (err: unknown) {
    const msg = err instanceof Error ? err.message : String(err);
    res.status(500).json({ ok: false, error: msg });
  }
}
```

### 4. `package.json`

```json
{
    "name": "bb-stagehand-on-vercel",
    "private": true,
    "type": "module",
    "engines": { "node": ">=18" },
    "dependencies": {
      "@browserbasehq/stagehand": "^2.4.3",
      "zod": "^3.25.0"
    },
    "devDependencies": {
      "typescript": "^5.6.0",
      "@types/node": "^20.12.12",
      "@vercel/node": "^3.2.20"
    }
}
```

### 5. `tsconfig.json`

```json
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "ES2022",
    "moduleResolution": "node",
    "outDir": ".vercel/output/functions",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "types": ["node"]
  },
  "include": ["api/**/*.ts"]
}
```

### 6. `vercel.json`

```json
{
  "$schema": "https://openapi.vercel.sh/vercel.json",
  "functions": {
    "api/run.ts": {
      "maxDuration": 60
    }
  }
}
```

æ›´å¤šè¯¦æƒ…å‚è§ Vercel æ–‡æ¡£ï¼š[configuring functions](https://vercel.com/docs/functions/configuring-functions)ã€‚

### 7. å…³è”é¡¹ç›®

åœ¨é…ç½®ç¯å¢ƒå˜é‡ä¹‹å‰ï¼Œå°†æœ¬åœ°æ–‡ä»¶å¤¹å…³è”åˆ°ä¸€ä¸ª Vercel é¡¹ç›®ï¼š

```bash
# å¦‚éœ€å…ˆç™»å½•
vercel login

# å°†å½“å‰ç›®å½•å…³è”åˆ°ä¸€ä¸ª Vercel é¡¹ç›®ï¼ˆäº¤äº’å¼ï¼‰
vercel link
```

### 8. ç¯å¢ƒå˜é‡

ç”Ÿäº§ç¯å¢ƒä¸è¦æäº¤ `.env`ã€‚é€šè¿‡ Vercel CLI æ·»åŠ å˜é‡ï¼š

```bash
vercel env add BROWSERBASE_API_KEY
vercel env add BROWSERBASE_PROJECT_ID
# ï¼ˆè‹¥éœ€è¦æ¨¡å‹å¯†é’¥ï¼‰
vercel env add GOOGLE_API_KEY
```

å¦è§ï¼š[Browser Environment](/zh/configuration/environment) äº†è§£æ‰€éœ€å˜é‡çš„è¯¦ç»†ä¿¡æ¯ã€‚

### 9. æœ¬åœ°æµ‹è¯•

åœ¨æœ¬åœ°æ¨¡æ‹Ÿ Vercel ç¯å¢ƒï¼Œåœ¨éƒ¨ç½²å‰è¿è¡Œå¹¶éªŒè¯ä½ çš„ Functionã€‚ä»é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œã€‚

```bash
# ç¡®ä¿å·²å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨æœ¬åœ° Vercel å¼€å‘æœåŠ¡å™¨
vercel dev --listen 5005
```

### 10. éƒ¨ç½²

```bash
vercel
vercel --prod
```

### æ‰§è¡Œå‡½æ•°

```bash
curl -X POST https://<your-deployment>/api/run
```

### å¯é€‰ï¼šåœ¨ Vercel ä¸Šé…ç½® Cron

é€šè¿‡æ‰©å±• `vercel.json`ï¼ŒæŒ‰è®¡åˆ’è§¦å‘åŒä¸€ç«¯ç‚¹ï¼š

```json
{
  "$schema": "https://openapi.vercel.sh/vercel.json",
  "functions": {
    "api/run.ts": {
      "maxDuration": 60
    }
  },
  "crons": [
    { "path": "/api/run", "schedule": "0 * * * *" }
  ]
}
```

### åŠŸèƒ½

- ä½¿ç”¨ `env: "BROWSERBASE"` å³å¯æ— éœ€æœ¬åœ°æµè§ˆå™¨ã€‚[Browserbase](https://www.browserbase.com/) æä¾›æµè§ˆå™¨ç¯å¢ƒã€‚
- é«˜é€Ÿï¼šå°†æµè§ˆå™¨å·¥ä½œå¸è½½åˆ° Browserbaseï¼Œå¹¶å¿«é€Ÿè¿”å› JSONã€‚
- é•¿æ—¶ä»»åŠ¡ï¼šæé«˜ `maxDuration`ï¼Œå’Œ/æˆ–æ ¹æ®å¥—é¤ç•™æ„ Edge è¿è¡Œæ—¶é™åˆ¶ã€‚
