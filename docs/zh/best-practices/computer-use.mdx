---
title: Computer Use 代理
description: 在 Stagehand 中，仅用一行代码即可集成 Anthropic 与 OpenAI 的 Computer Use API。
---

## 什么是 Computer Use Agent？ {#what-is-a-computer-use-agent}

<iframe width="100%" height="400" src="https://www.youtube.com/embed/ODaHJzOyVCQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen />

你可能听说过 [Claude Computer Use](https://www.anthropic.com/news/3-5-models-and-computer-use) 或 [OpenAI 的 Computer Using Agent](https://openai.com/index/computer-using-agent/)。

这些工具功能强大，能把自然语言转化为计算机上的具体操作。但在此之外，你通常需要自己编写代码，才能将这些操作转换成 Playwright 命令。

Stagehand 不仅负责执行 Computer Use 的输出，还支持你只用一行代码在 OpenAI 和 Anthropic 的模型之间热切换。

## 如何在 Stagehand 中使用 Computer Use Agent {#how-to-use-a-computer-use-agent-in-stagehand}

Stagehand 只需一行代码即可使用 Computer Use Agent：

<Note>
  **重要：请配置浏览器窗口尺寸**

  Computer Use Agent 通常会返回用于点击屏幕的 XY 坐标，因此需要先配置浏览器窗口尺寸。

  如果未指定，默认尺寸为 1024x768。你也可以在 `browserbaseSessionCreateParams` 或 `localBrowserLaunchOptions` 选项中进行配置。
</Note>

### 配置浏览器尺寸 {#configuring-browser-dimensions}

不同运行环境的浏览器配置有所差异：

<Tabs>
  <Tab title="BROWSERBASE">
    <CodeGroup>
      ```typescript TypeScript
      import { Stagehand } from "@browserbasehq/stagehand";

      const stagehand = new Stagehand({
      	env: "BROWSERBASE",
        	apiKey: process.env.BROWSERBASE_API_KEY /* API key for authentication */,
          projectId: process.env.BROWSERBASE_PROJECT_ID /* Project identifier */,
        
          browserbaseSessionCreateParams: {
            projectId: process.env.BROWSERBASE_PROJECT_ID!,
            browserSettings: {
      		blockAds: true,
              viewport: {
                width: 1024,
                height: 768,
              },
            },
        	},
      });

      await stagehand.init();
      ```

      ```python Python
      import os
      from stagehand import Stagehand, StagehandConfig

      stagehand = Stagehand(StagehandConfig(
          env="BROWSERBASE",
          api_key=os.getenv("BROWSERBASE_API_KEY"),  # API key for authentication
          project_id=os.getenv("BROWSERBASE_PROJECT_ID"),  # Project identifier
          
          browserbase_session_create_params={
              "projectId": os.getenv("BROWSERBASE_PROJECT_ID"),
              "browserSettings": {
                  "blockAds": True,
                  "viewport": {
                      "width": 1024,
                      "height": 768,
                  },
              },
          },
      ))

      await stagehand.init()
      ```
    </CodeGroup>
  </Tab>

  <Tab title="LOCAL">
    <CodeGroup>
      ```typescript TypeScript
      import { Stagehand } from "@browserbasehq/stagehand";

      const stagehand = new Stagehand({
        env: "LOCAL",
        localBrowserLaunchOptions: {
          headless: false,
          viewport: {
            width: 1024,
            height: 768,
          },
        }
      });

      await stagehand.init();
      ```

      ```python Python
      from stagehand import Stagehand, StagehandConfig

      stagehand = Stagehand(StagehandConfig(
          env="LOCAL",
          local_browser_launch_options={
              "headless": False,
              "viewport": {
                  "width": 1024,
                  "height": 768",
              },
          }
      ))

      await stagehand.init()
      ```
    </CodeGroup>
  </Tab>
</Tabs>

### 指挥你的 Computer Use Agent {#direct-your-computer-use-agent}

在代理实例上调用 `execute` 来下达任务。

<CodeGroup>
  ```typescript TypeScript
  // Navigate to a website
  await stagehand.page.goto("https://www.google.com");

  const agent = stagehand.agent({
  	// You can use either OpenAI or Anthropic
  	provider: "anthropic",
  	// The model to use (computer-use-preview for OpenAI)
  	model: "claude-sonnet-4-20250514",

  	// Customize the system prompt
  	instructions: `You are a helpful assistant that can use a web browser.
  	Do not ask follow up questions, the user will trust your judgement.`,

  	// Customize the API key
  	options: {
  		apiKey: process.env.ANTHROPIC_API_KEY,
  	},
  });

  // Execute the agent
  await agent.execute("Apply for a library card at the San Francisco Public Library");
  ```

  ```python Python
  import os

  # Navigate to a website
  await stagehand.page.goto("https://www.google.com")

  agent = stagehand.agent({
      # The model to use
      model="computer-use-preview",

      # Customize the system prompt
      instructions="You are a helpful assistant that can use a web browser. Do not ask follow up questions, the user will trust your judgement.",

      # Customize the API key
      options={
          "apiKey": os.getenv("ANTHROPIC_API_KEY"),
      },
  })

  # Execute the agent
  await agent.execute("Apply for a library card at the San Francisco Public Library")
  ```
</CodeGroup>

你也可以通过以下方式设置代理可执行的最大步数：

<CodeGroup>
  ```typescript TypeScript
  await agent.execute({
  	instructions: "Apply for a library card at the San Francisco Public Library",
  	maxSteps: 10,
  });
  ```

  ```python Python
  await agent.execute(
  	"Apply for a library card at the San Francisco Public Library",
  	max_steps=10,
  )
  ```
</CodeGroup>